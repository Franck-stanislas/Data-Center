{% extends 'admin/admin.base.html.twig' %}

{% block body %}
    <main class="content">

        {{ include ('admin/layouts/admin.menu.html.twig') }}
        {{include('admin/layouts/navbar.html.twig')}}
        <div class="py-4">
            <nav aria-label="breadcrumb" class="d-none d-md-inline-block">
                <ol class="breadcrumb breadcrumb-dark breadcrumb-transparent">
                    <li class="breadcrumb-item">
                        <a href="#">
                            <svg class="icon icon-xxs" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                        </a>
                    </li>
                    <li class="breadcrumb-item"><a href="">Projets</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Liste</li>
                </ol>
            </nav>

            <div class="d-flex justify-content-between w-100 flex-wrap">
                <div class="mb-3 mb-lg-0">
                    <h1 class="h4"> Liste des projets </h1>
                </div>
                <div>
                    <a href="{{ path('app_projects_create') }}" class="btn btn-outline-gray-600 d-inline-flex align-items-center">
                        <svg class="icon icon-xs me-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>
                        Ajouter un projet
                    </a>
                </div>
            </div>
        </div>
        <div class="row">
            {% if is_granted('ROLE_SUPER_ADMIN') %}

                {% for statut in statuts %}
                    {% if statut.id ==1%}
                        <div class="col-12 col-sm-6 col-xl-4 mb-4">
                            <div class="card border-0 shadow">
                                <div class="card-body">
                                    <div class="row d-block d-xl-flex align-items-center">
                                        <div class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
                                            <div class="icon-shape icon-shape-info rounded me-4 me-sm-0">
                                                <svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="3em" height="3em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32"><path fill="#1769aa" d="M2 28h28v2H2zm25-17a1 1 0 0 0 1-1V7a1 1 0 0 0-.66-.94l-11-4a1 1 0 0 0-.68 0l-11 4A1 1 0 0 0 4 7v3a1 1 0 0 0 1 1h1v13H4v2h24v-2h-2V11zM6 7.7l10-3.64L26 7.7V9H6zM18 24h-4V11h4zM8 11h4v13H8zm16 13h-4V11h4z"/></svg>
                                            </div>
                                            <div class="d-sm-none">
                                                <h2 class="fw-extrabold h5">{{ statut.nom }}</h2>
                                                <h3 class="mb-1">{{ statut.projet.count }}</h3>
                                            </div>
                                        </div>
                                        <div class="col-12 col-xl-7 px-xl-0">
                                            <div class="d-none d-sm-block">
                                                <h2 class="h6 text-gray-400 mb-0">{{ statut.nom }}</h2>
                                                <h3 class="fw-extrabold mb-2">{{ statut.projet.count }}</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {%elseif statut.id ==2%}
                        <div class="col-12 col-sm-6 col-xl-4 mb-4">
                            <div class="card border-0 shadow">
                                <div class="card-body">
                                    <div class="row d-block d-xl-flex align-items-center">
                                        <div class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
                                            <div class="icon-shape icon-shape-purple rounded me-4 me-sm-0">
                                                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="3em" height="3em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 640 512"><path fill="#3d4faf" d="m512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4c-11.8-4.4-22.6-10.7-32.1-18.6c-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3c-2-12-2.1-24.6 0-37.1c1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7c9.5-7.9 20.4-14.2 32.1-18.6c5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4c11.8 4.4 22.6 10.7 32.1 18.6c4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3c2 12 2.1 24.6 0 37.1c-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7c-9.5 7.9-20.4 14.2-32.1 18.6c-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8c-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1c-8.9 24.2-26.4 46.4-42.6 65.8c-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6c-24.6 4.2-50.4 4.4-75.9 0c-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3c-16.2-19.4-33.3-41.6-42.2-65.7c-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29c8.9-24.2 26-46.4 42.2-65.8c7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5c24.6-4.2 50.5-4.4 76-.1c11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3c16.2 19.4 33.2 41.6 42.1 65.8c4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7c-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4c-11.8-4.4-22.6-10.7-32.1-18.6c-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3c-2-12-2.1-24.6 0-37.1c1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7c9.5-7.9 20.4-14.2 32.1-18.6c5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4c11.8 4.4 22.6 10.7 32.1 18.6c4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3c2 12 2.1 24.6 0 37.1c-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7c-9.5 7.9-20.4 14.2-32.1 18.6c-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8c-38.5-29.6-82.4 14.3-52.8 52.8z"/></svg>
                                            </div>
                                            <div class="d-sm-none">
                                                <h2 class="fw-extrabold h5">{{ statut.nom }}</h2>
                                                <h3 class="mb-1">{{ statut.projet.count }}</h3>
                                            </div>
                                        </div>
                                        <div class="col-12 col-xl-7 px-xl-0">
                                            <div class="d-none d-sm-block">
                                                <h2 class="h6 text-gray-400 mb-0">{{ statut.nom }}</h2>
                                                <h3 class="fw-extrabold mb-2">{{ statut.projet.count }}</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {%elseif statut.id ==3%}
                        <div class="col-12 col-sm-6 col-xl-4 mb-4">
                            <div class="card border-0 shadow">
                                <div class="card-body">
                                    <div class="row d-block d-xl-flex align-items-center">
                                        <div class="col-12 col-xl-5 text-xl-center mb-3 mb-xl-0 d-flex align-items-center justify-content-xl-center">
                                            <div class="icon-shape icon-shape-success rounded me-4 me-sm-0">
                                                <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="3em" height="3em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><circle cx="12" cy="3.5" r="1.5" fill="#327335" opacity="0"><animateTransform attributeName="transform" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="0 12 12;90 12 12;180 12 12;270 12 12"/><animate attributeName="opacity" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"/></circle><circle cx="12" cy="3.5" r="1.5" fill="#327335" opacity="0"><animateTransform attributeName="transform" begin="0.2s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="30 12 12;120 12 12;210 12 12;300 12 12"/><animate attributeName="opacity" begin="0.2s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"/></circle><circle cx="12" cy="3.5" r="1.5" fill="#327335" opacity="0"><animateTransform attributeName="transform" begin="0.4s" calcMode="discrete" dur="2.4s" repeatCount="indefinite" type="rotate" values="60 12 12;150 12 12;240 12 12;330 12 12"/><animate attributeName="opacity" begin="0.4s" dur="0.6s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1;1;0"/></circle></svg>
                                            </div>
                                            <div class="d-sm-none">
                                                <h2 class="fw-extrabold h5">{{ statut.nom }}</h2>
                                                <h3 class="mb-1">{{ statut.projet.count }}</h3>
                                            </div>
                                        </div>
                                        <div class="col-12 col-xl-7 px-xl-0">
                                            <div class="d-none d-sm-block">
                                                <h2 class="h6 text-gray-400 mb-0">{{ statut.nom }}</h2>
                                                <h3 class="fw-extrabold mb-2">{{ statut.projet.count }}</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {%endif%}
                {%endfor%}
            {% endif%}
        </div>

        <div class="card border-0 shadow mb-4">
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-centered table-nowrap mb-0 rounded" id="myTable">
                        <thead class="thead-light">
                        <tr>
                            <th class="border-0 rounded-start">#</th>
                            <th class="border-0">Ville</th>
                            <th class="border-0">Intitulé</th>
                            <th class="border-0">Secteur</th>
                            <th class="border-0">Objectifs</th>
                            <th class="border-0">Caractéristique</th>
                            <th class="border-0">Marchés cibles</th>
                            <th class="border-0">Supply Chain</th>
                            <th class="border-0">Facteurs et atouts géographique</th>
                            <th class="border-0">Résultat attendus</th>
                            <th class="border-0">Couts estimatif</th>
                            <th class="border-0">Valeur ajoutées</th>
                            <th class="border-0">Eligibilité au bénéfice</th>
                            <th class="border-0">Maturité du projet</th>
                            <th class="border-0">Eléments de maturation</th>
                            <th class="border-0">Statut du projet</th>
                            <th class="border-0 rounded-end">Financement</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% if projets|length > 0 %}
                            {% for projet in projets %}
                                <!-- Item -->
                                <tr>
                                    <td><a href="#" class="text-primary fw-bold">{{ projet.id}}</a> </td>
                                    <td>
                                        {{ projet.arrondissement.ville}}
                                    </td>
                                    <td>
                                        {{ projet.institule }}
                                    </td>
                                    <td>
                                        {{ projet.secteur.nomCategorie }}
                                    </td>
                                    <td >
                                        {{ projet.objectifs [:50]}}

                                    </td>
                                    <td >
                                        {{ projet.caracteristique [:50]}}
                                    </td>
                                    <td >
                                        {{ projet.marche }}
                                    </td>
                                    <td >
                                        {{ projet.supply}}
                                    </td>
                                    <td >
                                        {{ projet.atouts [:50]}}
                                    </td>
                                    <td >
                                        {{ projet.resultats [:50]}}

                                    </td>
                                    <td>
                                        {{ projet.couts }}
                                    </td>
                                    <td >
                                        {{ projet.valeurAjouter [:50]}}
                                    </td>
                                    <td >
                                        {{ projet.eligibilite [:50]}}
                                    </td>
                                    <td>
                                        {{ projet.maturite.nomMaturite }}
                                    </td>
                                    <td>
                                        <ul>
                                            {% for elt in projet.maturite.eltMaturites%}
                                                <li>{{ elt.nom }}</li>
                                            {%endfor%}
                                        </ul>

                                    </td>
                                    <td>
                                        {% if projet.statut%}
                                            {{ projet.statut.nom }}
                                        {%endif%}
                                    </td>
                                    <td>
                                        <ol>
                                            {% for financement in projet.maturite.financements %}
                                                <li>
                                                    {{ financement.nomFinancement }}
                                                </li>
                                            {% endfor%}
                                        </ol>



                                    </td>
                                </tr>
                                <!-- End of Item -->
                            {% endfor %}
                        {% else%}
                            <tr>
                                <td colspan="9" class="text-center text-danger">Aucun projet enregistré</td>
                            </tr>
                        {% endif%}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        {{include('admin/layouts/footer.html.twig')}}
    </main>
{% endblock %}


